local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local root = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- ðŸ§© GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RocketGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 150, 0, 60)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local launchButton = Instance.new("TextButton")
launchButton.Size = UDim2.new(1, -20, 1, -20)
launchButton.Position = UDim2.new(0, 10, 0, 10)
launchButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
launchButton.TextColor3 = Color3.new(1, 1, 1)
launchButton.Font = Enum.Font.GothamBold
launchButton.TextSize = 18
launchButton.Text = "LAUNCH"
launchButton.Parent = frame

-- ðŸš€ Launch Logic
local isLaunching = false

local function startRocketSequence()
	if isLaunching then return end
	isLaunching = true

	launchButton.Text = "LAUNCHED"
	launchButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	launchButton.AutoButtonColor = false
	launchButton.Active = false

	humanoid.PlatformStand = true
	humanoid.AutoRotate = false

	local initialPosition = root.Position
	local platform = Instance.new("Part")
	platform.Anchored = true
	platform.CanCollide = false
	platform.Transparency = 1
	platform.Size = Vector3.new(6, 1, 6)
	platform.Position = initialPosition
	platform.Parent = workspace

	local spin = Instance.new("BodyAngularVelocity")
	spin.AngularVelocity = Vector3.new(0, math.rad(6000), 0)
	spin.MaxTorque = Vector3.new(0, math.huge, 0)
	spin.P = 10000
	spin.Parent = root

	local uprightGyro = Instance.new("BodyGyro")
	uprightGyro.MaxTorque = Vector3.new(400000, 0, 400000)
	uprightGyro.P = 10000
	uprightGyro.CFrame = root.CFrame
	uprightGyro.Parent = root

	local follow = Instance.new("BodyPosition")
	follow.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
	follow.P = 10000
	follow.D = 100
	follow.Position = platform.Position + Vector3.new(0, 5, 0)
	follow.Parent = root

	local state = "spin"
	local phaseStart = tick()

	local conn
	conn = RunService.Heartbeat:Connect(function()
		local elapsed = tick() - phaseStart

		uprightGyro.CFrame = CFrame.new(root.Position) * CFrame.Angles(0, root.Orientation.Y, 0)
		follow.Position = platform.Position + Vector3.new(0, 5, 0)

		if state == "spin" and elapsed >= 15 then
			state = "fly"
			phaseStart = tick()
			TweenService:Create(platform, TweenInfo.new(20, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
				Position = Vector3.new(platform.Position.X, 500, platform.Position.Z)
			}):Play()

		elseif state == "fly" and elapsed >= 20 then
			state = "fall"
			phaseStart = tick()
			TweenService:Create(platform, TweenInfo.new(10, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {
				Position = Vector3.new(platform.Position.X, initialPosition.Y, platform.Position.Z)
			}):Play()

		elseif state == "fall" and elapsed >= 10 then
			state = "reset"
			conn:Disconnect()

			spin:Destroy()
			follow:Destroy()
			uprightGyro:Destroy()
			platform:Destroy()

			humanoid.PlatformStand = false
			humanoid.AutoRotate = true

			isLaunching = false
			launchButton.Text = "LAUNCH"
			launchButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
			launchButton.Active = true
		end
	end)
end

-- ðŸ”˜ Trigger dari tombol
launchButton.MouseButton1Click:Connect(startRocketSequence)