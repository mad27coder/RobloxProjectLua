-- Pengaturan awal
getgenv().autoThank = false
getgenv().promoSpam = false

-- Services
local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local VirtualUser = game:GetService("VirtualUser")
local localPlayer = Players.LocalPlayer
local chat = TextChatService:WaitForChild("TextChannels"):WaitForChild("RBXGeneral")

-- Anti-AFK
Players.LocalPlayer.Idled:Connect(function()
	VirtualUser:CaptureController()
	VirtualUser:ClickButton1(Vector2.new(0, 0))
end)

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui", localPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "AutoGUI"
ScreenGui.ResetOnSpawn = false

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 220, 0, 160)
Frame.Position = UDim2.new(0.5, -110, 0.5, -80)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.Active = true
Frame.Draggable = true

local toggleButton = Instance.new("TextButton", ScreenGui)
toggleButton.Size = UDim2.new(0, 40, 0, 40)
toggleButton.Position = UDim2.new(1, -45, 0.5, -20)
toggleButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.Text = "â‰¡"
toggleButton.ZIndex = 10
toggleButton.Active = true
toggleButton.Draggable = true

local guiVisible = true
toggleButton.MouseButton1Click:Connect(function()
	guiVisible = not guiVisible
	Frame.Visible = guiVisible
end)

-- GUI Elements
local ThankButton = Instance.new("TextButton", Frame)
ThankButton.Size = UDim2.new(0, 200, 0, 40)
ThankButton.Position = UDim2.new(0, 10, 0, 10)
ThankButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ThankButton.TextColor3 = Color3.new(1, 1, 1)

local PromoButton = Instance.new("TextButton", Frame)
PromoButton.Size = UDim2.new(0, 200, 0, 40)
PromoButton.Position = UDim2.new(0, 10, 0, 60)
PromoButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
PromoButton.TextColor3 = Color3.new(1, 1, 1)

local StatusLabel = Instance.new("TextLabel", Frame)
StatusLabel.Size = UDim2.new(0, 200, 0, 20)
StatusLabel.Position = UDim2.new(0, 10, 0, 105)
StatusLabel.BackgroundTransparency = 1
StatusLabel.TextColor3 = Color3.new(1, 1, 1)
StatusLabel.TextScaled = true

local SignatureLabel = Instance.new("TextLabel", Frame)
SignatureLabel.Size = UDim2.new(0, 200, 0, 20)
SignatureLabel.Position = UDim2.new(0, 10, 1, -25)
SignatureLabel.BackgroundTransparency = 1
SignatureLabel.TextColor3 = Color3.new(1, 1, 1)
SignatureLabel.Text = "DHINZ HUB"
SignatureLabel.Font = Enum.Font.SourceSansBold
SignatureLabel.TextScaled = true

local function updateGUI()
	ThankButton.Text = "Toggle Auto Jokes (" .. (getgenv().autoThank and "ON" or "OFF") .. ")"
	PromoButton.Text = "Toggle Auto Promo (" .. (getgenv().promoSpam and "ON" or "OFF") .. ")"
	StatusLabel.Text = "Status: Jokes " .. (getgenv().autoThank and "ON" or "OFF") .. " / Promo " .. (getgenv().promoSpam and "ON" or "OFF")
end

updateGUI()

-- Messages
local thankMessages = {
    "Why don't skeletons fight each other? They don't have the guts.",
    "What do you call fake spaghetti? An impasta!",
    "Why did the scarecrow win an award? He was outstanding in his field.",
    "Why don't eggs tell jokes? They'd crack each other up.",
    "How do you organize a space party? You planet.",
    "Why can't your nose be 12 inches long? Because then it would be a foot!",
    "What did the ocean say to the beach? Nothing, it just waved.",
    "Why did the math book look sad? It had too many problems.",
    "Why was the broom late? It swept in!",
    "What do you call a pile of cats? A meow-tain.",
    "Whatâ€™s orange and sounds like a parrot? A carrot.",
    "Why did the banana go to the doctor? Because it wasn't peeling well.",
    "How does a penguin build its house? Igloos it together.",
    "Why did the computer catch a cold? It left its Windows open.",
    "What did one wall say to the other? I'll meet you at the corner.",
    "Why did the coffee file a police report? It got mugged.",
    "Why did the golfer bring two pairs of pants? In case he got a hole in one.",
    "What kind of music do mummies listen to? Wrap music.",
    "Why are elevator jokes so good? They work on many levels.",
    "Whatâ€™s a vampireâ€™s favorite fruit? A blood orange.",
    "How do cows stay up to date? They read the moos-paper.",
    "What do you call cheese that isn't yours? Nacho cheese!",
    "What did the grape do when he got stepped on? Nothing, he just let out a little wine.",
    "Why donâ€™t oysters donate to charity? Because theyâ€™re shellfish.",
    "How does the moon cut his hair? Eclipse it.",
    "Why did the cookie go to the hospital? Because it felt crummy.",
    "How do you make holy water? You boil the hell out of it.",
    "Why did the stadium get hot after the game? All the fans left.",
    "Why did the tomato turn red? Because it saw the salad dressing!",
    "How do you catch a squirrel? Climb a tree and act like a nut!",
    "Why donâ€™t scientists trust atoms? Because they make up everything!",
    "What do you call a bear with no teeth? A gummy bear.",
    "Why donâ€™t seagulls fly over the bay? Because then theyâ€™d be bagels.",
    "What do you get when you cross a snowman and a vampire? Frostbite.",
    "How do you find Will Smith in the snow? You look for fresh prints.",
    "Why was the math teacher late? She took the rhombus instead of the bus.",
    "What do you call a lazy kangaroo? A pouch potato.",
    "Why donâ€™t some couples go to the gym? Because some relationships donâ€™t work out.",
    "Whatâ€™s a skeletonâ€™s favorite instrument? A trom-bone.",
    "What kind of shoes do ninjas wear? Sneakers!",
    "Why was Cinderella so bad at soccer? Because she kept running away from the ball.",
    "What do you call a sleeping bull? A bulldozer.",
    "Why did the bike fall over? Because it was two-tired.",
    "What do elves learn in school? The elf-abet.",
    "Why was the calendar so popular? It had a lot of dates.",
    "How do you make a tissue dance? Put a little boogie in it.",
    "Why did the man put his money in the freezer? He wanted cold hard cash.",
    "Why did the chicken join a band? Because it had the drumsticks.",
    "Whatâ€™s brown and sticky? A stick.",
    "Why donâ€™t you ever see elephants hiding in trees? Because theyâ€™re so good at it."
}

local promoMessages = {
	"Support the cause! Every bit helps. ðŸ’–",
	"Join the movement! Your donation makes a difference.",
	"Thanks for being awesome! Keep the support coming!",
}

-- Promo Delay System
local promoDelayUntil = 0
local promoPauseOnDonation = 30

local function getRandomPromoInterval()
	return math.random(15, 17)
end

-- Shuffle function
local function shuffle(array)
	local shuffled = {}
	local indices = {}
	for i = 1, #array do table.insert(indices, i) end
	for i = #indices, 2, -1 do
		local j = math.random(i)
		indices[i], indices[j] = indices[j], indices[i]
	end
	for _, i in ipairs(indices) do
		table.insert(shuffled, array[i])
	end
	return shuffled
end

local shuffledPromo = shuffle(promoMessages)
local shuffledIndex = 1

-- Auto Promo Logic
task.spawn(function()
	while true do
		if getgenv().promoSpam then
			local currentTime = tick()
			if currentTime >= promoDelayUntil then
				if chat then
					local msg = shuffledPromo[shuffledIndex]
					chat:SendAsync(msg)
					shuffledIndex += 1
					if shuffledIndex > #shuffledPromo then
						shuffledPromo = shuffle(promoMessages)
						shuffledIndex = 1
					end
				end
				promoDelayUntil = currentTime + getRandomPromoInterval()
			end
		end
		task.wait(1)
	end
end)

-- Auto Thank Logic + Promo Pause Trigger
local leaderstats = localPlayer:WaitForChild("leaderstats")
local raisedStat = leaderstats:WaitForChild("Raised")
local lastRaised = raisedStat.Value

raisedStat.Changed:Connect(function()
	if getgenv().autoThank then
		local newRaised = raisedStat.Value
		if newRaised > lastRaised then
			if chat then
				local msg = thankMessages[math.random(1, #thankMessages)]
				chat:SendAsync(msg)
			end
			lastRaised = newRaised
		end
	end
	-- Pause promo for 36 seconds
	promoDelayUntil = tick() + promoPauseOnDonation
end)

-- Button Logic
ThankButton.MouseButton1Click:Connect(function()
	getgenv().autoThank = not getgenv().autoThank
	updateGUI()
end)

PromoButton.MouseButton1Click:Connect(function()
	getgenv().promoSpam = not getgenv().promoSpam
	updateGUI()
end)